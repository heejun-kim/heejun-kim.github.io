---
layout: post
permalink: /category/marketingstory/installing-google-analytics-4,-universal-google-analytics-with-google-tagmanager/
title: "구글 태그매니저로 구글 애널리틱스 4(GA4), 유니버설 구글 애널리틱스 설치하기"
date: 2020-11-20 15:13:00 +09:00
image : posts/08/google_tag_manager_explain4.jpg
tags:
  - 구글애널리틱스 4
  - 구글태그매니저
  - 기초
description: '기존에 웹사이트에 코드로 심었던 구글 애널리틱스를 구글 태그매니저를 이용하여 설치하고 구글 애널리틱스 4도 태그매니저를 활용해 다시 설치해 보겠습니다.'
---



안녕하세요 오늘은 구글 태그매니저를 처음 사용하는 초보자 분들을 위해 태그매니저를 이용하여 구글 애널리틱스를 설치하는 방법에 대해 설명해드리고자 합니다.<br>
계정을 만드는 단계부터 차근차근 설명하며 진행할 예정이니 겁먹지 말고 설치해보세요!

## 구글 태그매니저가 뭔가요?

구글에서는 구글 태그매니저를 웹사이트 또는 모바일 앱을 분석 및 측정하기 위한 태그 관리자 시스템이라고 정의하고 있습니다. 이런 구글 태그매니저는 크게 태그, 트리거, 변수로 구성 되어있습니다. 각각의 정의를 간단한게 살펴보면

<ul>
<li><b>태그</b> : 구글 애널리틱스 같은 시스템에 데이터를 전송하는 코드입니다. <br>구글 태그매니저는 기본적으로 제공하는 태그들이 있기 때문에 해당 태그들의 경우 코드를 입력하지 않아도 사용하는 것이 가능합니다. 같은 회사인 구글 외에도 다양한 업체의 제품을 기본 태그로 제공하고 있습니다.
</li>
</ul>

[기본 태그 정보 확인하기](https://support.google.com/tagmanager/answer/6106924)

<ul>
<li><b>트리거</b> : 트리거는 쉽게 말하면 태그를 실행시키는 시점입니다.<br>사용자가 특정 버튼을 클릭할 때, 특정 웹페이지를 보고 있을 때, 특정 파일을 다운로드받을 때처럼 고객이 특정 행동을 취할 때 태그가 실행하게 하는 방아쇠의 역할을 합니다.
</li>
</ul>

<ul>
<li><b>변수</b> : 변수는 쉽게 말하면 분석을 하는데 필요한 값을 담는 그릇입니다.<br>간혹 변수에 대해서 트리거를 동작하는 변할 수 있는 값이라고 정의하는 곳이 있는데 이는 반만 맞는 말입니다. 변수는 트리거가 동작하는 시점을 정의하는 역할 외에 상품의 구매가격, 상품명 같은 고객에 따라 달라질 수 있는 변하는 값을 저장하는 데도 사용합니다.
</li>
</ul>

간단한 설명을 듣고 나니 구글 태그매니저에 대해 조금은 감이 잡히시나요? 당장 구글 태그매니저가 어떤 툴인지는 완벽하게 이해하지 못했다 해도 구글 애널리틱스와 구글 태그매니저가 다르다는 것은 확실하게 이해하고 가도록 해요

<ul>
<li><b>구글 애널리틱스</b> : 고객 행동 데이터를 수집하고 이를 보고서를 이용하여 분석하기 쉽게 보여주는 툴! 결국 분석은 사람의 몫이다.
</li>
<li><b>구글 태그매니저</b> : 구글 애널리틱스 같은 디지털 마케팅 툴에 분석을 위한 데이터를 전송해주고 데이터를 전송해주는 태그, 트리거, 변수를 관리하는 관리 툴! 이를 사용하면 고객의 행동을 추적하기 위해 개발자를 찾아갈 일이 현저히 준다.
</li>
</ul>



## 구글 태그매니저 이용해 구글 애널리틱스 설치하기

1. 구글 태그매니저를 관리하기 위한 구글 ID  로그인 합니다.

2. [구글태그매니저](https://tagmanager.google.com/)에 접속하여 계정 만들기를 클릭합니다. 

   ![구글 태그매니저 세팅 1단계](/images/posts/08/google_tag_manager_setting_step1.png) 

3. 계정 이름에 본인의 블로그나 사이트명을 입력해주고 국가는 대한민국으로 설정한 뒤 아래의 데이터 공유 여부를 묻는 부분을 체크합니다.<br>컨테이너 이름에는 본인의 도메인을 넣고 플랫폼에서는 자신에게 맞는 플랫폼을 선택합니다. <br>계정과 컨테이너의 관계는 유니버설 구글 애널리틱스의 **계정과 속성의 관계**로 보시면 됩니다. 즉 하나의 계정에 여러 개의 컨테이너가 존재할 수 있습니다.

   ![구글 태그매니저 세팅 2단계](/images/posts/08/google_tag_manager_setting_step2.png) 

4. 만들기를 누르면 아래와 같은 데이터 처리 약관 동의에 관련된 창이 나오는 데 동의에 체크하고 다음으로 넘어가시면 됩니다.

   ![구글 태그매니저 세팅 3단계](/images/posts/08/google_tag_manager_setting_step3.png)

5. 컨테이너가 생성되고 다음과 같은 화면이 보입니다. 구글 애널리틱스 때와 마찬가지로 구글 태그매니저도 작동을 위한 기본 코드를 웹사이트에 심어줘야 합니다.<br>구글 애널리틱스 때와 달리 <head> 외에 <body>에도 코드를 심어줘야 합니다. 바디에 심기는 코드는 헤드에 심긴 메인 코드가 작동하지 않을 때 작동하는 보조의 코드입니다.

   ![구글 태그매니저 세팅 4단계](/images/posts/08/google_tag_manager_setting_step4.png)

   해당 창을 모르고 꺼버렸다고요? 당황하지 마세요! 다음과 같은 경로로 가면 다시 코드를 확인하는 것이 가능하답니다.<br>

   #### **관리자 - Google 태그 관리자 설치**

   ![구글 태그매니저 세팅 5단계](/images/posts/08/google_tag_manager_setting_step5.png)

6. 구글태그매니저를 심은 사이트에 들어가 구글 태그 어시스턴트를 확인합니다. 구글 태그 어시스턴트는 구글이 만든 확장 프로그램으로 구글 애널리틱스, 구글 태그매니저 같은 제품들이 잘 작동하는지 확인이 가능합니다.<br>
   [구글 태그 어시트턴트 설치하러 가기](https://chrome.google.com/webstore/detail/tag-assistant-by-google/kejbdjndbnbjgmefkgdddjlbokphdefk?hl=ko)

   ![구글 태그매니저 세팅 6단계](/images/posts/08/google_tag_manager_setting_step6.png)

   색이 뭔가 이상하네요...우리가 흔히 아는 정상을 뜻하는 색인 파랑, 녹색이 아닌 노랑 빨강은 무언가 문제가 있음을 뜻합니다. 찾아보니 구글 태그매니저를 처음 만들고 제출하지 않았을 시에 발생하는 문제라고 하네요. 해당 문제를 해결해보겠습니다.

7. 구글 태그매니저로 돌아가면 오른쪽 상단에 제출이라는 버튼이 보입니다. 구글 태그매니저의 변경 사항은 제출을 하기 전까지는 적용이 되지 않으니 구글 태그매니저의 변경사항이 있다면 잊지 말고 제출을 눌러주세요. 지금은 아무것도 변한 게 없지만, 구글 태그 어시스턴트 오류를 수정하기 위해 제출을 해보겠습니다.<br>제출할 때 나오는 입력창에서 추후 확인해도 언제 어떤 변화가 있었는지 알 수 있게 버전 이름과 버전 설명을 자세히 써주시는 것이 좋습니다.

   ![구글 태그매니저 세팅 7단계](/images/posts/08/google_tag_manager_setting_step7.png)

8. 제출하고 다시 사이트로 가서 구글 태그 어시스턴트를 확인하면 정상적으로 녹색 불이 들어옴을 확인할 수 있습니다. 이제 구글 태그매니저의 설치는 완료되었습니다.

   ![구글 태그매니저 세팅 8단계](/images/posts/08/google_tag_manager_setting_step8.png)

9. 이제 구글 애널리틱스를 세팅해보기 위해 변수로 이동해 볼게요. 구글 태그매니저는 기본 태그처럼 유용하고 가장 일반적으로 사용되는 변수를 기본으로 제공하고 있습니다. 처음에는 이 변수들이 모두 열려있지 않으니 아래 사진처럼 구성을 눌러 필요한 변수들을 추가해보겠습니다. <br>
   [기본 제공 변수 설명 보러가기](https://support.google.com/tagmanager/answer/7182738?hl=ko&ref_topic=7182737)

   ![구글 태그매니저 세팅 9단계](/images/posts/08/google_tag_manager_setting_step9.png)

10. 필요한 기본 변수를 활성화하였으면 유니버설 구글 애널리틱스의 추적 ID를 담을 변수를 만들어 보겠습니다. <br>구글 태그매니저에서는 구글 애널리틱스를 기본 태그로 제공하여 코드를 넣지는 않아도 되지만 추적 ID는 변수로 넣도록 구조가 짜져있습니다.<br>새로 만들기를 눌러 기본 제공 변수가 아닌 맞춤 변수로 추적 ID를 담은 변수를 만들어 보겠습니다.

    ![구글 태그매니저 세팅 10단계](/images/posts/08/google_tag_manager_setting_step10.png)

11. 다음과 같은 화면에서 오른쪽 상단 위의 펜을 누르거나 변수 구성 창을 눌러 변수 구성을 선택하는 창에 진입합니다. 

    ![구글 태그매니저 세팅 11단계](/images/posts/08/google_tag_manager_setting_step11.png)

12. 스크롤을 내려 Google 애널리틱스 설정이라고 되어 있는 변수 유형을 선택합니다.<br>[변수 유형 설명 확인하기](https://support.google.com/tagmanager/answer/7683362?hl=ko&ref_topic=9125128)

    ![구글 태그매니저 세팅 12단계](/images/posts/08/google_tag_manager_setting_step12.png)

13. 추적 ID는 구글 애널리틱스 - 관리 - 속성 설정 - 추적 ID 경로로 확인 가능합니다.
    ![구글 태그매니저 세팅 13단계](/images/posts/08/google_tag_manager_setting_step13.png)

14. 복사한 추적 ID를 변수 구성 내부의 추적 ID에 붙여넣고 적절한 변수 이름을 정하여 저장을 누릅니다.
    ![구글 태그매니저 세팅 14단계](/images/posts/08/google_tag_manager_setting_step14.png)

15. 보통은 변수를 만든 후 트리거를 만들지만, 구글 애널리틱스의 기본 태그는 모든 페이지에서 작동해야 하기 때문에 따로 조건을 정하여 트리거를 만들 필요가 없습니다.<br> 바로 태그를 만들러 이동해보겠습니다. 새로 만들기를 눌러주세요.
    ![구글 태그매니저 세팅 15단계](/images/posts/08/google_tag_manager_setting_step15.png)

16. 변수와 마찬가지로 태그 유형을 결정해야 합니다. 매우 친절하게도 **Google 애널리틱스 유니버설 애널리틱스**라고 되어있네요. 해당 태그를 클릭합니다.
    ![구글 태그매니저 세팅 16단계](/images/posts/08/google_tag_manager_setting_step16.png)

17. 추적 유형은 모든 페이지뷰 트리거를 적용할 것이기 때문에 페이지뷰로 유지하고 Google 애널리틱스 설정 부분에 아까 만들었던 추적 ID 변수를 넣어줍니다.
    ![구글 태그매니저 세팅 17단계](/images/posts/08/google_tag_manager_setting_step17.png)

18. 태그의 설정이 끝났으면 태그 구성 아래 트리거 부분을 클릭하여 아래 창에 접속합니다. 모든 페이지뷰 트리거는 **All Pages**로 제공되고 있기 때문에 해당 트리거를 선택합니다.
    ![구글 태그매니저 세팅 18단계](/images/posts/08/google_tag_manager_setting_step18.png)

19. 16 ~ 18단계를 잘 따라왔다면 화면은 다음과 같은 모습입니다. 추적 ID 때와 마찬가지로 알아보기 쉬운 네이밍을 해주고 저장을 눌러주세요.
    ![구글 태그매니저 세팅 19단계](/images/posts/08/google_tag_manager_setting_step19.png)

20. 이제 구글 애널리틱스 4를 세팅해볼 차례입니다. 유니버설 구글 애널리틱스에서 연결해서 사용했던 방식과 달리 구글 태그매니저를 사용하면 구글 애널리틱스 4 태그를 따로 생성해줘야 합니다.<br> 태그 유형으로 **Google 애널리틱스 GA4 구성**을 클릭합니다.
    ![구글 태그매니저 세팅 20단계](/images/posts/08/google_tag_manager_setting_step20.png)

21. [구글 애널리틱스 4(Google Analytics 4)를 알아본 뒤, 구글 태그 매니저 없이 세팅해보고 내부 IP를 제거해보자](https://heejun.kim/category/marketingstory/learn_about_google_analytics_4,_set_up_google_analytics_4_without_google_tag_manager_and_apply_internal_ip_filter/) 글에서 설명했던 것처럼 구글 애널리틱스 4에서는 추적 ID가 아닌 데이터 스트림 별로 ID를 가지고 있습니다.<br> **구글 애널리틱스 4 속성 - 관리 - 데이터 스트림 - 내 웹사이트 스트림 선택 - 측정 ID** 경로로 들어가 복사해오겠습니다.
    ![구글 태그매니저 세팅 21단계](/images/posts/08/google_tag_manager_setting_step21.png)

22. 측정 ID를 넣고 마찬가지로 트리거에 모든 페이지뷰를 넣으면 다음과 같은 모습입니다. 적절한 네이밍을 만들어주고 저장을 누릅니다.
    ![구글 태그매니저 세팅 22단계](/images/posts/08/google_tag_manager_setting_step22.png)

23. 제출하기를 누르지 않아도 기본 태그를 생성하고 나면 다음과 같이 각 구글 애널리틱스에서 정상적으로 작동하는 것을 확인할 수 있습니다.
    ![구글 태그매니저 세팅 23단계](/images/posts/08/google_tag_manager_setting_step23.png)
    ![구글 태그매니저 세팅 24단계](/images/posts/08/google_tag_manager_setting_step24.png)

24. 이제 구글 태그매니저로 심은 구글 애널리틱스들이 정상적으로 작동하는 것을 확인하였으니 중복으로 데이터가 수집되는 것을 방지하기 위해 기존 웹사이트에 있던 유니버설 구글 애널리틱스 기본 코드를 제거합니다.

25. 구글 애널리틱스 4도 구글 태그매니저를 통해 세팅하였으니 연결된 사이트 태그 설정을 제거하도록 하겠습니다.<br> **구글애널리틱스 - 관리 - 추적 정보 - 추적 코드 - 연결된 사이트 태그** 경로로 들어가 제거하겠습니다.
    ![구글 태그매니저 세팅 26단계](/images/posts/08/google_tag_manager_setting_step26.png)

26. 연결된 구글 애널리틱스 4 태그의 오른쪽 끝에 있는 점 3개를 클릭하여 제거를 누릅니다.
    ![구글 태그매니저 세팅 27단계](/images/posts/08/google_tag_manager_setting_step27.png)

27. 중복으로 수집될 위험을 모두 제거하였으니 구글 태그매니저로 돌아가 제출을 눌러 구글 애널리틱스 세팅을 마무리합니다.

오늘 글은 어떠셨나요? <br>초보자의 입장에서 이 글만 봐도 구글 태그매니저로 유니버설 구글 애널리틱스와 구글 애널리틱스 4는 설치하는 데 문제가 없게 하려다 보니 글이 길어졌습니다.<br> 구글 태그매니저가 쉬운 디지털 마케팅 툴은 아니지만 그렇다고 넘사벽으로 어려운 툴도 아닙니다. 이 글을 통해 작은 성취를 느끼시고 구글 태그매니저에 대한 자신감을 얻어가셨으면 좋겠습니다.<br>
다음에도 더 유익한 글로 찾아뵙겠습니다. 감사합니다:-) <br>